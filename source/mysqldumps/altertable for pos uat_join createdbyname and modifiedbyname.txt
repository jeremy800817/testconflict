CREATE OR REPLACE VIEW `vw_mygoldtransaction` AS select `gtr`.`gtr_id` AS `gtr_id`,`gtr`.`gtr_originalamount` AS `gtr_originalamount`,`gtr`.`gtr_settlementmethod` AS `gtr_settlementmethod`,`gtr`.`gtr_salespersoncode` AS `gtr_salespersoncode`,`gtr`.`gtr_campaigncode` AS `gtr_campaigncode`,`gtr`.`gtr_refno` AS `gtr_refno`,`gtr`.`gtr_orderid` AS `gtr_orderid`,`gtr`.`gtr_status` AS `gtr_status`,`gtr`.`gtr_rewardstatus` AS `gtr_rewardstatus`,`gtr`.`gtr_completedon` AS `gtr_completedon`,`gtr`.`gtr_reversedon` AS `gtr_reversedon`,`gtr`.`gtr_failedon` AS `gtr_failedon`,`gtr`.`gtr_createdon` AS `gtr_createdon`,
`gtr`.`gtr_createdby` AS `gtr_createdby`,
`createdby`.`usr_name` AS `gtr_createdbyname`,
`gtr`.`gtr_modifiedon` AS `gtr_modifiedon`,
`gtr`.`gtr_modifiedby` AS `gtr_modifiedby`,
`modifiedby`.`usr_name` AS `gtr_modifiedbyname`,
(case when (`vw_order`.`ord_type` = 'CompanyBuy') then `vw_mydisbursement`.`dbm_gatewayrefno` when (`vw_order`.`ord_type` = 'CompanySell') then `vw_mypaymentdetail`.`pdt_gatewayrefno` else `vw_mypaymentdetail`.`pdt_gatewayrefno` end) AS `gtr_dbmpdtgatewayrefno`,(case when (`vw_order`.`ord_type` = 'CompanyBuy') then `vw_mydisbursement`.`dbm_refno` when (`vw_order`.`ord_type` = 'CompanySell') then `vw_mypaymentdetail`.`pdt_paymentrefno` else `vw_mypaymentdetail`.`pdt_paymentrefno` end) AS `gtr_dbmpdtreferenceno`,(case when (`vw_order`.`ord_type` = 'CompanyBuy') then `vw_mydisbursement`.`dbm_requestedon` when (`vw_order`.`ord_type` = 'CompanySell') then `vw_mypaymentdetail`.`pdt_requestedon` else `vw_mypaymentdetail`.`pdt_requestedon` end) AS `gtr_dbmpdtrequestedon`,(case when (`vw_order`.`ord_type` = 'CompanyBuy') then `vw_mydisbursement`.`dbm_accountholdername` when (`vw_order`.`ord_type` = 'CompanySell') then `vw_mypaymentdetail`.`pdt_accountholdername` else `vw_mypaymentdetail`.`pdt_accountholdername` end) AS `gtr_dbmpdtaccountholdername`,(case when (`vw_order`.`ord_type` = 'CompanyBuy') then `vw_mydisbursement`.`dbm_accountholdercode` when (`vw_order`.`ord_type` = 'CompanySell') then `vw_mypaymentdetail`.`pdt_accountholdercode` else `vw_mypaymentdetail`.`pdt_accountholdercode` end) AS `gtr_dbmpdtaccountholdercode`,(case when (`vw_order`.`ord_type` = 'CompanyBuy') then `vw_mydisbursement`.`dbm_verifiedamount` when (`vw_order`.`ord_type` = 'CompanySell') then `vw_mypaymentdetail`.`pdt_verifiedamount` else `vw_mypaymentdetail`.`pdt_verifiedamount` end) AS `gtr_dbmpdtverifiedamount`,`vw_order`.`ord_fpprice` AS `gtr_ordfpprice`,`vw_order`.`ord_feetypename` AS `gtr_feetypename`,`vw_order`.`ord_partnerid` AS `gtr_ordpartnerid`,`vw_order`.`ord_productname` AS `gtr_ordproductname`,`vw_order`.`ord_buyerid` AS `gtr_ordbuyerid`,`vw_order`.`ord_orderno` AS `gtr_ordorderno`,`vw_order`.`ord_type` AS `gtr_ordtype`,`vw_order`.`ord_price` AS `gtr_ordprice`,`vw_order`.`ord_xau` AS `gtr_ordxau`,`vw_order`.`ord_amount` AS `gtr_ordamount`,`vw_order`.`ord_fee` AS `gtr_ordfee`,`vw_order`.`ord_discountprice` AS `gtr_orddiscountprice`,`vw_order`.`ord_discountinfo` AS `gtr_orddiscountinfo`,`vw_order`.`ord_remarks` AS `gtr_ordremarks`,`vw_order`.`ord_isspot` AS `gtr_ordisspot`,`vw_order`.`ord_bookingon` AS `gtr_ordbookingon`,`vw_order`.`ord_confirmon` AS `gtr_ordconfirmon`,`vw_order`.`ord_cancelon` AS `gtr_ordcancelon`,`vw_order`.`ord_status` AS `gtr_ordstatus`,`partner`.`par_name` AS `gtr_ordpartnername`,`myaccountholder`.`ach_fullname` AS `gtr_achfullname`,`myaccountholder`.`ach_accountholdercode` AS `gtr_achcode`,`myaccountholder`.`ach_email` AS `gtr_achemail`,`myaccountholder`.`ach_mykadno` AS `gtr_achmykadno`,`myaccountholder`.`ach_phoneno` AS `gtr_achphoneno`,`myaccountholder`.`ach_partnercusid` AS `gtr_achpartnercusid`,`myaccountholder`.`ach_type` AS `gtr_achtype`,(case when (`myaccountholder`.`ach_type` = 1) then 'Premium' else 'Basic' end) AS `gtr_achtypename`,`myaccountholder`.`ach_referralbranchcode` AS `gtr_referralbranchcode`,`vw_mypaymentdetail`.`pdt_amount` AS `gtr_pdtamount`,`vw_mypaymentdetail`.`pdt_sourcerefno` AS `gtr_pdtsourcerefno`,`vw_mypaymentdetail`.`pdt_signeddata` AS `gtr_pdtsigneddata`,`vw_mypaymentdetail`.`pdt_location` AS `gtr_pdtlocation`,`vw_mypaymentdetail`.`pdt_gatewayfee` AS `gtr_pdtgatewayfee`,`vw_mypaymentdetail`.`pdt_customerfee` AS `gtr_pdtcustomerfee`,`vw_mypaymentdetail`.`pdt_token` AS `gtr_pdttoken`,`vw_mypaymentdetail`.`pdt_status` AS `gtr_pdtstatus`,`vw_mypaymentdetail`.`pdt_transactiondate` AS `gtr_pdttransactiondate`,`vw_mypaymentdetail`.`pdt_successon` AS `gtr_pdtsuccesson`,`vw_mypaymentdetail`.`pdt_failedon` AS `gtr_pdtfailedon`,`vw_mypaymentdetail`.`pdt_refundedon` AS `gtr_pdtrefundedon`,`vw_mydisbursement`.`dbm_amount` AS `gtr_dbmamount`,`vw_mydisbursement`.`dbm_bankid` AS `gtr_dbmbankid`,`mybank`.`bnk_swiftcode` AS `gtr_dbmbankswiftcode`,`vw_mydisbursement`.`dbm_bankrefno` AS `gtr_dbmbankrefno`,`vw_mydisbursement`.`dbm_accountname` AS `gtr_dbmaccountname`,`vw_mydisbursement`.`dbm_accountnumber` AS `gtr_dbmaccountnumber`,`vw_mydisbursement`.`dbm_acebankcode` AS `gtr_dbmacebankcode`,`vw_mydisbursement`.`dbm_fee` AS `gtr_dbmfee`,`vw_mydisbursement`.`dbm_status` AS `gtr_dbmstatus`,`vw_mydisbursement`.`dbm_transactionrefno` AS `gtr_dbmtransactionrefno`,`vw_mydisbursement`.`dbm_disbursedon` AS `gtr_dbmdisbursedon`,`mybank`.`bnk_name` AS `gtr_dbmbankname` 
from ((((((`mygoldtransaction` `gtr` left join `vw_order` on((`gtr`.`gtr_orderid` = `vw_order`.`ord_id`))) left join `myaccountholder` on((`myaccountholder`.`ach_id` = `vw_order`.`ord_buyerid`))) left join `vw_mypaymentdetail` on((`gtr`.`gtr_refno` = `vw_mypaymentdetail`.`pdt_sourcerefno`))) left join `vw_mydisbursement` on((`gtr`.`gtr_refno` = `vw_mydisbursement`.`dbm_transactionrefno`))) left join `mybank` on((`mybank`.`bnk_id` = `vw_mydisbursement`.`dbm_bankid`))) 
left join `partner` on((`partner`.`par_id` = `vw_order`.`ord_partnerid`)))
left join `user` AS `createdby` on ((`createdby`.`usr_id` = `gtr`.`gtr_createdby`))
left join `user` AS `modifiedby` on ((`modifiedby`.`usr_id` = `gtr`.`gtr_modifiedby`))
